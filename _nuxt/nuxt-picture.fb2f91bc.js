import{I as z,a0 as F,a1 as b,N as O,a2 as $,a3 as x,a4 as N,E as q,G as I,q as p,f as R,u as B,J as L,K as U,l as S}from"./entry.babc7773.js";async function H(e,t){return await T(t).catch(i=>(console.error("Failed to get image meta for "+t,i+""),{width:0,height:0,ratio:0}))}async function T(e){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((t,r)=>{const i=new Image;i.onload=()=>{const n={width:i.width,height:i.height,ratio:i.width/i.height};t(n)},i.onerror=n=>r(n),i.src=e})}function D(e=""){return e.split(/[?#]/).shift().split("/").pop().split(".").pop()}function _(e){return t=>t?e[t]||t:e.missingValue}function G({formatter:e,keyMap:t,joinWith:r="/",valueMap:i}={}){e||(e=(o,s)=>`${o}=${s}`),t&&typeof t!="function"&&(t=_(t));const n=i||{};return Object.keys(n).forEach(o=>{typeof n[o]!="function"&&(n[o]=_(n[o]))}),(o={})=>Object.entries(o).filter(([d,a])=>typeof a<"u").map(([d,a])=>{const l=n[d];return typeof l=="function"&&(a=l(o[d])),d=typeof t=="function"?t(d):d,e(d,a)}).join(r)}function v(e=""){if(typeof e=="number")return e;if(typeof e=="string"&&e.replace("px","").match(/^\d+$/g))return parseInt(e,10)}function C(e){const t={options:e},r=(n,o={})=>j(t,n,o),i=(n,o={},s={})=>r(n,{...s,modifiers:$(o,s.modifiers||{})}).url;for(const n in e.presets)i[n]=(o,s,d)=>i(o,s,{...e.presets[n],...d});return i.options=e,i.getImage=r,i.getMeta=(n,o)=>J(t,n,o),i.getSizes=(n,o)=>X(t,n,o),t.$img=i,i}async function J(e,t,r){const i=j(e,t,{...r});return typeof i.getMeta=="function"?await i.getMeta():await H(e,i.url)}function j(e,t,r){var l,g;if(typeof t!="string"||t==="")throw new TypeError(`input must be a string (received ${typeof t}: ${JSON.stringify(t)})`);if(t.startsWith("data:"))return{url:t};const{provider:i,defaults:n}=k(e,r.provider||e.options.provider),o=K(e,r.preset);if(t=z(t)?t:F(t),!i.supportsAlias)for(const c in e.options.alias)t.startsWith(c)&&(t=b(e.options.alias[c],t.substr(c.length)));if(i.validateDomains&&z(t)){const c=O(t).host;if(!e.options.domains.find(f=>f===c))return{url:t}}const s=$(r,o,n);s.modifiers={...s.modifiers};const d=s.modifiers.format;(l=s.modifiers)!=null&&l.width&&(s.modifiers.width=v(s.modifiers.width)),(g=s.modifiers)!=null&&g.height&&(s.modifiers.height=v(s.modifiers.height));const a=i.getImage(t,s,e);return a.format=a.format||d||"",a}function k(e,t){const r=e.options.providers[t];if(!r)throw new Error("Unknown provider: "+t);return r}function K(e,t){if(!t)return{};if(!e.options.presets[t])throw new Error("Unknown preset: "+t);return e.options.presets[t]}function X(e,t,r){var l,g;const i=v((l=r.modifiers)==null?void 0:l.width),n=v((g=r.modifiers)==null?void 0:g.height),o=i&&n?n/i:0,s=[],d={};if(typeof r.sizes=="string")for(const c of r.sizes.split(/[\s,]+/).filter(f=>f)){const f=c.split(":");f.length===2&&(d[f[0].trim()]=f[1].trim())}else Object.assign(d,r.sizes);for(const c in d){const f=e.options.screens&&e.options.screens[c]||parseInt(c);let m=String(d[c]);const y=m.endsWith("vw");if(!y&&/^\d+$/.test(m)&&(m=m+"px"),!y&&!m.endsWith("px"))continue;let h=parseInt(m);if(!f||!h)continue;y&&(h=Math.round(h/100*f));const u=o?Math.round(h*o):n;s.push({width:h,size:m,screenMaxWidth:f,media:`(max-width: ${f}px)`,src:e.$img(t,{...r.modifiers,width:h,height:u},r)})}s.sort((c,f)=>c.screenMaxWidth-f.screenMaxWidth);const a=s[s.length-1];return a&&(a.media=""),{sizes:s.map(c=>`${c.media?c.media+" ":""}${c.size}`).join(", "),srcset:s.map(c=>`${c.src} ${c.width}w`).join(", "),src:a==null?void 0:a.src}}const Q=G({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(e,t)=>x(e)+"_"+x(t)}),V=(e,{modifiers:t={},baseURL:r}={},i)=>{t.width&&t.height&&(t.resize=`${t.width}x${t.height}`,delete t.width,delete t.height);const n=Q(t)||"_";return r||(r=b(i.options.nuxt.baseURL,"/_ipx")),{url:b(r,n,N(e))}},Y=!0,Z=!0,ee=Object.freeze(Object.defineProperty({__proto__:null,getImage:V,supportsAlias:Z,validateDomains:Y},Symbol.toStringTag,{value:"Module"})),A={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{}};A.providers={ipx:{provider:ee,defaults:void 0}};const te=()=>{const e=q(),t=I();return t.$img||t._img||(t._img=C({...A,nuxt:{baseURL:e.app.baseURL}}))},M={src:{type:String,required:!0},format:{type:String,default:void 0},quality:{type:[Number,String],default:void 0},background:{type:String,default:void 0},fit:{type:String,default:void 0},modifiers:{type:Object,default:void 0},preset:{type:String,default:void 0},provider:{type:String,default:void 0},sizes:{type:[Object,String],default:void 0},preload:{type:Boolean,default:void 0},width:{type:[String,Number],default:void 0},height:{type:[String,Number],default:void 0},alt:{type:String,default:void 0},referrerpolicy:{type:String,default:void 0},usemap:{type:String,default:void 0},longdesc:{type:String,default:void 0},ismap:{type:Boolean,default:void 0},loading:{type:String,default:void 0},crossorigin:{type:[Boolean,String],default:void 0,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,default:void 0,validator:e=>["async","auto","sync"].includes(e)}},ie=e=>{const t=p(()=>({provider:e.provider,preset:e.preset})),r=p(()=>({width:v(e.width),height:v(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:e.crossorigin===!0?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding})),i=p(()=>({...e.modifiers,width:v(e.width),height:v(e.height),format:e.format,quality:e.quality,background:e.background,fit:e.fit}));return{options:t,attrs:r,modifiers:i}},re={...M,legacyFormat:{type:String,default:null},imgAttrs:{type:Object,default:null}},ne=R({name:"NuxtPicture",props:re,emits:["load"],setup:(e,t)=>{var m,y,h;const r=te(),i=ie(e),n=p(()=>["png","webp","gif"].includes(o.value)),o=p(()=>D(e.src)),s=p(()=>e.format||(o.value==="svg"?"svg":"webp")),d=p(()=>e.legacyFormat?e.legacyFormat:{webp:n.value?"png":"jpeg",svg:"png"}[s.value]||o.value),a=p(()=>s.value==="svg"?[{src:e.src}]:(d.value!==s.value?[d.value,s.value]:[s.value]).map(w=>{const{srcset:P,sizes:W,src:E}=r.getSizes(e.src,{...i.options.value,sizes:e.sizes||r.options.screens,modifiers:{...i.modifiers.value,format:w}});return{src:E,type:`image/${w}`,sizes:W,srcset:P}}));if(e.preload){const u=(m=a.value)!=null&&m[1]?1:0,w={rel:"preload",as:"image",imagesrcset:a.value[u].srcset};(h=(y=a.value)==null?void 0:y[u])!=null&&h.sizes&&(w.imagesizes=a.value[u].sizes),B({link:[w]})}const l={...e.imgAttrs,"data-nuxt-pic":""};for(const u in t.attrs)u in M&&!(u in l)&&(l[u]=t.attrs[u]);const g=L(),f=I().isHydrating;return U(()=>{g.value&&(g.value.complete&&f&&!g.value.getAttribute("data-error")&&t.emit("load",new Event("load")),g.value.onload=u=>{t.emit("load",u)})}),()=>{var u;return S("picture",{key:a.value[0].src},[...(u=a.value)!=null&&u[1]?[S("source",{type:a.value[1].type,sizes:a.value[1].sizes,srcset:a.value[1].srcset})]:[],S("img",{ref:g,...i.attrs.value,...l,src:a.value[0].src,sizes:a.value[0].sizes,srcset:a.value[0].srcset})])}}});export{ne as _};
